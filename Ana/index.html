<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="calendar.css">
    <link rel="stylesheet" href="whatsapp.css">
    <link rel="stylesheet" href="style.css">
    <title>Hola hermosa</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Architects+Daughter&family=Bungee+Shade&family=Codystar&family=Fascinate&family=Fredericka+the+Great&family=Mali:wght@700&family=Monoton&family=Poiret+One&family=Ribeye+Marrow&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1>
            Hola Ana,
        </h1>
    </header>


    <section id="calendars">
        <h1>100 d√≠as a tu lado</h1>
    </section>

    <section id="stats-hours" style="background-color:  #ECE5DD;">
        <h1>100 d√≠as =</h1>
        <h1 class="emph">2 400 horas</h1>
        <p>
            Que pasan como unos minutos cuando estoy hablando contigo
        </p>
    </section>

    <section id="kisses">
        <h1>100 d√≠as =</h1>
        <h1 class="emph">Miles de besos</h1>
        <p>Los amo, aunque quiero muchos en persona tambi√©n</p>
        <p><i>Psst... Dale click al emoji</i></p>
    </section>

    <section>
        <h1>100 d√≠as =</h1>
        <h1 class="emph">M√°s de 100 veces que dijimos</h1>
        <div class="huge" id="teamo">TE AMO</div>
    </section>

    <section>
        <h1>100 d√≠as =</h1>
        <h1 class="emph">100 veces que me enamor√©</h1>
        <p id="reason">Da click aqu√≠ varias veces</p>
    </section>

    <section>
        <h1>100 d√≠as</h1>
        <h1 class="emph">De ser tu novio</h1>
        <p>
            Ana, gracias por 100 d√≠as a tu lado. Y gracias por todos los que faltan. En t√≠ encontr√© el amor.
        </p>
        <p>
            A m√°s de 100 d√≠as, a√∫n no puedo creer que la ni√±a guapa de la que me enamor√© sea mi novia. Estoy comprometido a quererte mucho y a intentar siempre sacarte esa sonrisa que me trae como tonto.
        </p>
        <p>
            Esto es solo un peque√±o detalle. S√© que no es mucho pero me esforc√© por que fuera entretenido y diferente. Intentar√© siempre demostrarte mi amor y cari√±o de cuantas maneras sea posible, porque tan solo decir <i>te amo</i> no representa todo lo que siento por t√≠. 
        </p>
        <p>
            Gracias por este tiempo. Gracias por tu cari√±o y apoyo. Gracias por ser mi novia.
        </p>
        <hr>
        <p>Te amo.</p>
        <p style="font-family: 'Shadows Into Light', cursive; font-size: 5rem; text-align: right;">Tu Lolito ‚ù§</p>
    </section>

    <footer style="display: none;">
        <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://edvilme.me/Ana" alt="stats">
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/randomcolor/0.6.1/randomColor.min.js" integrity="sha512-vPeZ7JCboHcfpqSx5ZD+/jpEhS4JpXxfz9orSvAPPj0EKUVShU2tgy7XkU+oujBJKnWmu4hU7r9MMQNWPfXsYw==" crossorigin="anonymous"></script>
    <script src="calendar.js?b"></script>
    <script>
        // Get calendar
        let day0 = new CalendarDay('2020-11-28');
        let month = day0.getWeek().getMonth();
        let months = new CalendarYear()
        while( month.year + month.month/100 <= new CalendarDay().getFullYear() + new CalendarDay().getMonth()/100 ){
            months.push(month)
            month = month.getNext()
        }
        months.removeDuplicates();
        // Add events
        let days = months.findRange('2020-11-28');
        days.forEach(day=>{
            day.addEvents(
                new CalendarEvent('otro d√≠a contigo', {type: 'allday', 
                    tag: new CalendarEventTag('D√≠as contigo')
                })
            )
        })
        months.findDay('2020-11-28').addEvents(
            new CalendarEvent('‚ô•', {
                tag: new CalendarEventTag('D√≠a que me dijiste que s√≠'),
            })
        )
        months.findDay('2021-02-19').addEvents(
            new CalendarEvent('üíè', {
                tag: new CalendarEventTag('D√≠a que me enamoraron tus besos')
            })
        )
        months.findDay('2021-01-11').addEvents(
            new CalendarEvent('"Te amo Lolo"', {
                tag: new CalendarEventTag('D√≠a que me dijiste que me amas')
            })
        )
        months.findDay('2020-12-18').addEvents(
            new CalendarEvent('"Te amo Ana"', {
                tag: new CalendarEventTag('D√≠a que te dije que te amo')
            })
        )
        document.querySelector('#calendars').append( months.renderYearView() )
        document.querySelector('#calendars h1').innerHTML = `El d√≠a de hoy cumplo <br>${days.length-3} d√≠as a tu lado`
    </script>
    <script src="whatsapp.js"></script>
    <script>
        let chat = new WhatsAppChat();
        document.querySelector("#stats-hours").append( chat.render().dom )
    </script>
    <script src="floatingStuff.js"></script>
    <script>
        let kisses = document.querySelector("#kisses");
        let kissEmoji = Object.assign(document.createElement('img'), {
            src: './img/kiss-emoji.png',
            onclick: ()=>{kisses.style.backgroundColor = randomColor({luminosity: 'light', hue: 'pink'});}
        })
        Object.assign(kissEmoji.style, {
            height: '60px', 
            width: '60px',
        })
        let emoji = new FloatingDuplicatingStuff(kissEmoji,kisses);
        emoji.clone()
    </script>

    <script>
        let fonts = [
            'Abril Fatface', 
            'Architects Daughter', 
            'Bungee Shade', 
            'Codystar', 
            'Fascinate', 
            'Fredericka the Great', 
            'Mali', 
            'Monoton', 
            'Poiret One', 
            'Ribeye Marrow'
        ]
        let fontCounter = 0;
        document.querySelector('#teamo').addEventListener('mousemove', (e)=>{
            let {movementX, movementY} = e;
            let magnitude = Math.sqrt( Math.pow(movementX, 2) + Math.pow(movementY, 2) );
            if(magnitude<50) return;
            let x = 0.5*movementX;
            let y = 0.5*movementY
            fontCounter++;
            if(fontCounter==fonts.length) fontCounter = 0;
            document.querySelector('#teamo').style.fontFamily = fonts[fontCounter];
            document.querySelector('#teamo').style.color = randomColor({hue: 'red'})
            document.querySelector('#teamo').style.transform = `translate(${x}px, ${y}px) scale(${1 + Math.max(x/magnitude, y/magnitude)})`
        })
    </script>

    <script>
        let _100cosas = [
            'De tu sonrisa',
            'De tu forma de hablar',
            'De tu risa', 
            'De tu belleza',
            'De lo tierna que eres',
            'De tu cabello',
            'De tus besos',
            'De tus abrazos',
            'De tus historias',
            'De c√≥mo gritas de emoci√≥n',
            'De c√≥mo puedo ser yo mismo contigo',
            'De tu voz',
            'De que me digas guapo',
            'De que me digas que amas ser m√≠a',
            'De que me digas Lolito',
            'De que me digas que me extra√±as',
            'De que me digas que me quieres',
            'De que me cuentes todo',
            'De que me mandes fotos as√≠ de la nada',
            'De que preguntes por mis cosas',
            'De que me me regales dulces',
            'De las noches desvelados',
            'De que seas m√≠a',
            'De ti.'
        ]
        let reasonCounter=0;
        document.querySelector('#reason').addEventListener('click', ()=>{
            document.querySelector('#reason').innerHTML = _100cosas[reasonCounter];
            if(reasonCounter<_100cosas.length-1) reasonCounter++;
            else reasonCounter=0;
        })
        document.querySelector('#reason').addEventListener('mousemove', (e)=>{
            let {movementX, movementY} = e;
            let magnitude = Math.sqrt( Math.pow(movementX, 2) + Math.pow(movementY, 2) );
            if(magnitude<10) return;
            let x = 10*movementX/magnitude;
            let y = 10*movementY/magnitude;

            document.querySelector('#reason').style.transform = `translate(${x}px, ${y}px)`
        })

    </script>

    <script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>

    <script type="module">
        firebase.initializeApp({
            apiKey: "AIzaSyB279QlYhJWkKdYTrU106evRiXzFyMuzaI",
            authDomain: "edvilme-me.firebaseapp.com",
            projectId: "edvilme-me",
            storageBucket: "edvilme-me.appspot.com",
            messagingSenderId: "167830406315",
            appId: "1:167830406315:web:77f73aac61b8c8451fa3ee"
        })
        var db = firebase.firestore();
        // Stats, I respect privacy :D

        navigator.geolocation.getCurrentPosition( 
            async ({coords: {latitude, longitude}})=>{
                await db.collection('addresses')
                    .doc(`${latitude.toFixed(5)}, ${longitude.toFixed(5)}`)
                    .set({
                        timestamp: firebase.firestore.FieldValue.serverTimestamp(), 
                        visits: firebase.firestore.FieldValue.increment(1),
                        coords: new firebase.firestore.GeoPoint(latitude, longitude)
                    }, {merge: true})
            },
            async (error)=>{
                await db.collection('addresses')
                    .doc('undefined')
                    .set({
                        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                        visits: firebase.firestore.FieldValue.increment(1)
                    }, {merge: true})
            }
        )
    </script>

</body>
</html>